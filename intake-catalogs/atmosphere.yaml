plugins:
  source:
    - module: intake_xarray
sources:

  gmet_v1:
    description: Full GMET version 1 (Newman) met ensemble in zarr format
    driver: zarr
    args:
      urlpath: gs://pangeo-ncar-gmet
      consolidated: True
      storage_options:
        requester_pays: True

  trmm_3b42rt:
    description: Near real time rainfall estimates from NASA's Tropical Rainfall Measuring Mission
    metadata:
      url: 'https://trmm.gsfc.nasa.gov/data_dir/data.html'
      tags:
        - precipitation
        - satellite
    driver: zarr
    args:
      urlpath: gs://pangeo-nasa-trmm
      storage_options:
        requester_pays: True

  sam_ngaqua_qobs_eqx_3d:
    description: 3D fields from a near-global Aquaplanet Simulation with the System for Atmospheric Modeling
    metadata:
      tags:
        - atmosphere
        - model
    driver: zarr
    args:
      urlpath: gs://pangeo-vulcan-sam/3d
      storage_options:
        requester_pays: True

  sam_ngaqua_qobs_eqx_2d:
    description: 2D fields from a near-global Aquaplanet Simulation with the System for Atmospheric Modeling
    metadata:
      tags:
        - atmosphere
        - model
    driver: zarr
    args:
      urlpath: gs://pangeo-vulcan-sam/2d
      storage_options:
        requester_pays: True

  gpcp_cdr_daily_v1_3:
    description: 3D fields from a near-global Aquaplanet Simulation with the System for Atmospheric Modeling
    metadata:
      title: "Global Precipitation Climatatology Project (GPCP) Climate Data Record (CDR), Daily V1.3"
      url: "https://climatedataguide.ucar.edu/climate-data/gpcp-daily-global-precipitation-climatology-project"
      tags:
        - atmosphere
        - model
    driver: zarr
    args:
      urlpath: gs://pangeo-noaa-esrl-gpcp
      storage_options:
        requester_pays: True

  wrf50_erai:
    description: Daily meteorology from 50km WRF simulation forced with ERA-Interim
    driver: zarr
    args:
      urlpath: gs://pangeo-ncar-wrf
      consolidated: True
      storage_options:
        requester_pays: True

  era5_hourly_reanalysis_single_levels_sa:
    description: "ERA5 hourly estimates of variables on single levels"
    metadata:
      url: 'https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels'
      tags:
      - ocean
      - model
      - atmosphere
    driver: zarr
    args:
      urlpath: gs://pangeo-era5/reanalysis/spatial-analysis
      consolidated: True
      storage_options:
        requester_pays: True

  HadCRUT4:
    description: HadCRUT temperature anomalies wrt. 1960-1989
    metadata:
      url: https://crudata.uea.ac.uk/cru/data/temperature/
      doi: 10.1029/2011JD017187
      tags:
        - atmosphere
        - land
        - ocean
        - observations
        - temperature
        - anomaly
      plots:
        temperature_anomaly_over_time:
          title: HadCRUT4 temperature anomly wrt. 1960-1989
          kind: contourf
          x: longitude
          y: latitude
          z: temperature_anomaly
          groupby: time
          cmap: RdBu_r
          levels: 20
          # clim: (-10, 10)  # once https://github.com/holoviz/hvplot/pull/492 is merged
    driver: netcdf
    args:
      urlpath: simplecache::https://crudata.uea.ac.uk/cru/data/temperature/HadCRUT.4.6.0.0.median.nc
      chunks: {'time': 'auto'}
      xarray_kwargs:
        use_cftime: True  # needed for plot.temperature_anomaly_over_time
        drop_variables: field_status
